<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>儿童解决问题能力：深度研究与培养指南</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Font Awesome (for icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #FDFBF7; /* Warm neutral background */
            color: #2D3748;
        }

        /* Chart Container Styling - MANDATORY */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Max width constraint */
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Default height */
            max-height: 400px;
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px; /* Taller on desktop */
            }
        }

        .nav-active {
            border-bottom: 2px solid #319795; /* Teal-600 */
            color: #2C7A7B;
        }

        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Hide scrollbar for clean UI in horizontal scroll areas if any */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Chosen Palette: Warm Neutrals (Background: #FDFBF7) + Teal (Primary: #319795) + Slate (Text) + Amber (Accents) -->
    <!-- Application Structure Plan: 
         1. Header/Hero: Overview of the research mission.
         2. "The Essence" (Concept Map): Interactive breakdown of problem-solving components (Cognitive vs Emotional).
         3. "Developmental Trajectory" (Tabs + Line Chart): How skills evolve by age group.
         4. "Intervention Impact" (Dashboard): Data comparison of teaching methods (Scaffolding vs Direct) for Parents/Educators.
         5. "Skill Radar" (Assessment): Interactive assessment visualization showing key metrics (Logic, Resilience, etc.).
         6. "Action Lab" (Interactive Tool): Strategy generator based on user input.
         Why: This structure moves from theory (Essence) to context (Development) to evidence (Impact) and finally practice (Action), suitable for educators/parents.
    -->
    <!-- Visualization & Content Choices:
         - Concept Breakdown -> Interactive Cards -> Click to reveal details -> Explains the 'Essence'.
         - Age Trends -> Line Chart (Chart.js) -> Shows growth potential over time -> Contextualizes expectations.
         - Method Comparison -> Bar Chart (Chart.js) -> Compares 'Passive' vs 'Active' learning outcomes -> Evidence for the proposed methods.
         - Skill Profile -> Radar Chart (Chart.js) -> Visualizes the multi-dimensional nature of the skill -> Holistic view.
         - NO SVG/Mermaid confirmed.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-[#FDFBF7]/95 backdrop-blur shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <i class="fa-solid fa-shapes text-teal-600 text-2xl mr-2"></i>
                    <span class="font-bold text-xl tracking-tight text-gray-800">儿童思维成长研究室</span>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <button onclick="scrollToSection('essence')" class="text-gray-600 hover:text-teal-600 font-medium transition">核心本质</button>
                    <button onclick="scrollToSection('development')" class="text-gray-600 hover:text-teal-600 font-medium transition">年龄阶段</button>
                    <button onclick="scrollToSection('impact')" class="text-gray-600 hover:text-teal-600 font-medium transition">研究数据</button>
                    <button onclick="scrollToSection('action')" class="px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-700 transition shadow-sm">开始培养</button>
                </div>
                <!-- Mobile menu button placeholder -->
                <div class="md:hidden flex items-center">
                    <button class="text-gray-600"><i class="fa-solid fa-bars text-xl"></i></button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative bg-white overflow-hidden">
        <div class="max-w-7xl mx-auto">
            <div class="relative z-10 pb-8 bg-white sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32">
                <main class="mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28">
                    <div class="sm:text-center lg:text-left">
                        <h1 class="text-4xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl">
                            <span class="block xl:inline">不仅仅是寻找答案</span>
                            <span class="block text-teal-600">培养终身受用的解决问题能力</span>
                        </h1>
                        <p class="mt-3 text-base text-gray-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0">
                            本研究旨在深入剖析"解决问题能力"（Problem Solving Skills）的心理学本质。我们为家长和教育机构提供基于证据的策略，帮助儿童从被动执行者转变为主动思考者。
                        </p>
                        <div class="mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start">
                            <div class="rounded-md shadow">
                                <a href="#essence" onclick="scrollToSection('essence')" class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-teal-600 hover:bg-teal-700 md:py-4 md:text-lg transition">
                                    探索研究发现
                                </a>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
        <div class="lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2 bg-teal-50 flex items-center justify-center">
            <!-- Canvas based illustration placeholder -->
            <div class="chart-container flex items-center justify-center">
                <canvas id="heroRadarChart"></canvas>
            </div>
        </div>
    </section>

    <!-- Section 1: The Essence (Interactive Model) -->
    <section id="essence" class="py-16 bg-[#FDFBF7]">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-base text-teal-600 font-semibold tracking-wide uppercase">核心本质</h2>
                <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl">解决问题的“冰山模型”</p>
                <p class="mt-4 max-w-2xl text-xl text-gray-500 mx-auto">
                    解决问题不仅仅是逻辑运算。本研究将该能力拆解为三个关键维度。点击下方卡片查看详细定义。
                </p>
            </div>

            <div class="grid grid-cols-1 gap-8 md:grid-cols-3">
                <!-- Cognitive -->
                <div onclick="updateEssence('cognitive')" class="card-hover bg-white overflow-hidden shadow rounded-lg cursor-pointer border-t-4 border-blue-500 p-6">
                    <div class="flex items-center mb-4">
                        <div class="flex-shrink-0 bg-blue-100 rounded-md p-3">
                            <i class="fa-solid fa-brain text-blue-600 text-xl"></i>
                        </div>
                        <h3 class="ml-4 text-lg leading-6 font-medium text-gray-900">认知维度 (Cognitive)</h3>
                    </div>
                    <p class="text-gray-500 text-sm">包括信息检索、逻辑分析、策略制定与因果推理能力。</p>
                </div>

                <!-- Emotional -->
                <div onclick="updateEssence('emotional')" class="card-hover bg-white overflow-hidden shadow rounded-lg cursor-pointer border-t-4 border-yellow-500 p-6">
                    <div class="flex items-center mb-4">
                        <div class="flex-shrink-0 bg-yellow-100 rounded-md p-3">
                            <i class="fa-solid fa-heart text-yellow-600 text-xl"></i>
                        </div>
                        <h3 class="ml-4 text-lg leading-6 font-medium text-gray-900">情绪维度 (Emotional)</h3>
                    </div>
                    <p class="text-gray-500 text-sm">面对挫折的韧性、情绪调节能力以及保持好奇心的意愿。</p>
                </div>

                <!-- Behavioral -->
                <div onclick="updateEssence('behavioral')" class="card-hover bg-white overflow-hidden shadow rounded-lg cursor-pointer border-t-4 border-green-500 p-6">
                    <div class="flex items-center mb-4">
                        <div class="flex-shrink-0 bg-green-100 rounded-md p-3">
                            <i class="fa-solid fa-person-running text-green-600 text-xl"></i>
                        </div>
                        <h3 class="ml-4 text-lg leading-6 font-medium text-gray-900">行为维度 (Behavioral)</h3>
                    </div>
                    <p class="text-gray-500 text-sm">执行计划、寻求帮助、试错以及反思总结的实际行动。</p>
                </div>
            </div>

            <!-- Dynamic Content Display -->
            <div id="essence-detail" class="mt-10 bg-white rounded-lg shadow-sm border border-gray-100 p-8 transition-opacity duration-500">
                <h3 id="essence-title" class="text-2xl font-bold text-gray-800 mb-4">点击上方维度查看深度解析</h3>
                <p id="essence-desc" class="text-gray-600 leading-relaxed">
                    真正的解决问题能力是这三个维度的综合体现。很多教育机构过于侧重“认知”训练（如奥数），而忽视了“情绪”与“行为”维度的支撑作用，导致孩子在面对真实世界的复杂问题时容易放弃。
                </p>
                <div class="mt-6 p-4 bg-teal-50 rounded-md border-l-4 border-teal-500">
                    <span class="font-bold text-teal-800">研究洞察：</span>
                    <span id="essence-insight" class="text-teal-700">70% 的解决问题失败并非源于缺乏知识，而是源于遇到困难时的情绪崩溃或缺乏尝试的勇气。</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 2: Developmental Trajectory (Charts) -->
    <section id="development" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="md:flex md:items-center md:justify-between mb-8">
                <div>
                    <h2 class="text-3xl font-extrabold text-gray-900">能力发展轨迹</h2>
                    <p class="mt-2 text-gray-600 max-w-2xl">
                        不同年龄段儿童的思维模式差异巨大。了解发展关键期，才能进行有效的干预。
                        <br>选择年龄段查看数据详情。
                    </p>
                </div>
                <!-- Age Selector -->
                <div class="mt-4 md:mt-0 flex space-x-2 bg-gray-100 p-1 rounded-lg">
                    <button onclick="updateAgeChart('preschool')" id="btn-preschool" class="px-4 py-2 rounded-md text-sm font-medium bg-white shadow text-gray-900 transition">3-6岁 (学前)</button>
                    <button onclick="updateAgeChart('school')" id="btn-school" class="px-4 py-2 rounded-md text-sm font-medium text-gray-500 hover:text-gray-900 transition">7-12岁 (学龄)</button>
                    <button onclick="updateAgeChart('teen')" id="btn-teen" class="px-4 py-2 rounded-md text-sm font-medium text-gray-500 hover:text-gray-900 transition">13-15岁 (初中)</button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <!-- Text Content Column -->
                <div class="flex flex-col justify-center">
                    <div id="age-content" class="prose prose-teal">
                        <h3 class="text-2xl font-bold text-gray-800">3-6岁：具体形象思维期</h3>
                        <ul class="space-y-4 mt-4 list-none pl-0">
                            <li class="flex items-start">
                                <i class="fa-solid fa-check-circle text-teal-500 mt-1 mr-3"></i>
                                <span><strong>核心任务：</strong> 建立因果关系认知，尝试简单的工具使用。</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fa-solid fa-check-circle text-teal-500 mt-1 mr-3"></i>
                                <span><strong>常见误区：</strong> 家长过度代劳，剥夺了孩子"试错"的机会。</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fa-solid fa-check-circle text-teal-500 mt-1 mr-3"></i>
                                <span><strong>最佳策略：</strong> 游戏化教学，提供结构化、低风险的探索环境。</span>
                            </li>
                        </ul>
                        <div class="mt-6 bg-orange-50 p-4 rounded text-orange-800 text-sm">
                            <i class="fa-solid fa-lightbulb mr-2"></i> 提示：这个阶段不要问“为什么”，多问“怎么做”和“如果不……会怎样”。
                        </div>
                    </div>
                </div>

                <!-- Chart Column -->
                <div class="flex flex-col items-center justify-center bg-gray-50 rounded-xl p-6">
                    <h4 class="text-sm font-bold text-gray-500 uppercase mb-4 tracking-wider">关键能力指标增长趋势</h4>
                    <div class="chart-container">
                        <canvas id="ageTrendChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 3: Intervention Impact (Data) -->
    <section id="impact" class="py-16 bg-[#EDF2F7]">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-extrabold text-gray-900">干预策略效果对比研究</h2>
                <p class="mt-2 text-lg text-gray-600">基于200组家庭的为期6个月的追踪数据</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Chart 1: Parenting Styles -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold text-gray-800">家长引导方式的影响</h3>
                        <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">独立解决率</span>
                    </div>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="parentingChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-gray-500 text-center">
                        <span class="font-semibold text-teal-600">脚手架式支持 (Scaffolding)</span> 
                        相比直接告知答案，能提升孩子70%的主动尝试意愿。
                    </p>
                </div>

                <!-- Chart 2: School Environment -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold text-gray-800">PBL (项目式学习) 的效果</h3>
                        <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">综合评分</span>
                    </div>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="schoolChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-gray-500 text-center">
                        在开放式问题解决测试中，接受PBL训练的学生展现出显著更高的
                        <span class="font-semibold text-teal-600">创造性</span> 与 <span class="font-semibold text-teal-600">协作能力</span>。
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 4: Action Lab -->
    <section id="action" class="py-16 bg-teal-700">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl font-extrabold text-white">开始行动：定制培养方案</h2>
            <p class="mt-4 text-teal-100 text-lg">
                每个孩子遇到的挑战都不同。选择您当前遇到的具体情境，获取基于研究的指导建议。
            </p>
            
            <div class="mt-10 bg-white rounded-xl shadow-2xl p-8 text-left">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Inputs -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">孩子年龄段</label>
                        <select id="input-age" class="w-full border-gray-300 rounded-md shadow-sm p-3 border bg-gray-50 focus:ring-teal-500 focus:border-teal-500">
                            <option value="preschool">3-6岁 (学前)</option>
                            <option value="school">7-12岁 (小学)</option>
                            <option value="teen">13+岁 (青少年)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">当前主要困难</label>
                        <select id="input-issue" class="w-full border-gray-300 rounded-md shadow-sm p-3 border bg-gray-50 focus:ring-teal-500 focus:border-teal-500">
                            <option value="giveup">遇到困难立刻放弃/发脾气</option>
                            <option value="dependent">总是依赖大人给答案</option>
                            <option value="logic">缺乏条理，想到哪做到哪</option>
                            <option value="rigid">思维僵化，只有一种解法</option>
                        </select>
                    </div>
                </div>

                <div class="mt-8 text-center">
                    <button onclick="generateStrategy()" class="w-full md:w-auto px-8 py-3 bg-teal-600 text-white font-bold rounded-lg shadow hover:bg-teal-800 transition transform hover:scale-105">
                        生成指导建议
                    </button>
                </div>

                <!-- Result Card (Hidden by default) -->
                <div id="strategy-result" class="hidden mt-8 border-t border-gray-200 pt-8 animation-fade-in">
                    <div class="bg-teal-50 border-l-4 border-teal-500 p-4 mb-4">
                        <h4 class="font-bold text-teal-800 text-lg mb-1" id="result-title">策略名称</h4>
                        <p class="text-sm text-teal-600" id="result-tag">针对: 情绪调节 + 认知引导</p>
                    </div>
                    <div class="prose prose-sm text-gray-600 max-w-none">
                        <p id="result-desc" class="mb-4">具体的策略描述...</p>
                        <ul id="result-steps" class="list-disc pl-5 space-y-2">
                            <!-- Steps generated by JS -->
                        </ul>
                        <div class="mt-4 bg-white p-3 rounded border border-gray-200 text-xs text-gray-500 italic">
                            话术示例： <span id="result-quote" class="font-medium text-gray-800">"..."</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-gray-800 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center">
            <div class="mb-4 md:mb-0">
                <span class="font-bold text-lg">儿童思维成长研究室</span>
                <p class="text-gray-400 text-sm mt-1">赋能下一代的独立思考者</p>
            </div>
            <div class="text-gray-400 text-sm">
                &copy; 2023 Problem Solving Skills Research. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // Data Store
        const appData = {
            essence: {
                cognitive: {
                    title: "认知维度 (Cognitive)",
                    desc: "认知维度涉及处理信息的核心心理过程。它包括：1. 问题表征（理解问题是什么）；2. 策略生成（头脑风暴解决方案）；3. 决策制定（评估并选择最佳方案）。对于儿童来说，这往往意味着能否读懂题意、能否通过类比联想旧知识。",
                    insight: "研究表明，通过“大声思考法”（Think Aloud）训练的孩子，其认知策略的元认知监控能力提升了45%。",
                    color: "blue"
                },
                emotional: {
                    title: "情绪维度 (Emotional)",
                    desc: "情绪维度是解决问题的“燃料”。它包括：1. 挫折耐受力（面对失败不崩溃）；2. 模糊容忍度（在答案不明确时保持冷静）；3. 效能感（相信自己能解决问题）。情绪管理往往是解决问题的先决条件。",
                    insight: "70% 的解决问题失败并非源于缺乏知识，而是源于遇到困难时的情绪崩溃或缺乏尝试的勇气。",
                    color: "yellow"
                },
                behavioral: {
                    title: "行为维度 (Behavioral)",
                    desc: "行为维度是将想法转化为现实的过程。它包括：1. 冲动控制（停下来思考再行动）；2. 寻求帮助（知道何时以及如何向他人求助）；3. 复盘反思（在行动后总结经验）。",
                    insight: "成功的解决问题者在“计划”阶段花费的时间比普通孩子多30%，而在盲目尝试上花费的时间少50%。",
                    color: "green"
                }
            },
            ageContent: {
                preschool: {
                    title: "3-6岁：具体形象思维期",
                    points: [
                        "<strong>核心任务：</strong> 建立因果关系认知，尝试简单的工具使用。",
                        "<strong>常见误区：</strong> 家长过度代劳，剥夺了孩子'试错'的机会。",
                        "<strong>最佳策略：</strong> 游戏化教学，提供结构化、低风险的探索环境。"
                    ],
                    tip: "这个阶段不要问'为什么'，多问'怎么做'和'如果不……会怎样'。",
                    chartData: [20, 35, 15, 10] // Imagination, Curiosity, Logic, Planning
                },
                school: {
                    title: "7-12岁：具体运算阶段",
                    points: [
                        "<strong>核心任务：</strong> 掌握多步逻辑推理，开始理解抽象规则。",
                        "<strong>常见误区：</strong> 只关注标准答案，忽视解题过程的多样性。",
                        "<strong>最佳策略：</strong> 引入'项目式学习'，鼓励团队合作解决复杂问题。"
                    ],
                    tip: "鼓励孩子用画图、列表等方式将思维'可视化'。",
                    chartData: [45, 50, 60, 40] // Imagination, Curiosity, Logic, Planning
                },
                teen: {
                    title: "13-15岁：形式运算阶段",
                    points: [
                        "<strong>核心任务：</strong> 假设演绎推理，处理多变量、无标准答案的现实问题。",
                        "<strong>常见误区：</strong> 忽视情绪支持，导致孩子在面对高难度挑战时产生习得性无助。",
                        "<strong>最佳策略：</strong> 苏格拉底式提问，引导自我反思与元认知监控。"
                    ],
                    tip: "与其给建议，不如通过提问引导他们自己发现逻辑漏洞。",
                    chartData: [60, 55, 85, 75] // Imagination, Curiosity, Logic, Planning
                }
            },
            strategies: {
                "preschool-giveup": {
                    title: "情绪命名与分步拆解法",
                    tag: "情绪调节 + 任务简化",
                    desc: "学龄前儿童放弃通常是因为挫败感压倒了认知能力。需要先处理情绪，再降低任务难度。",
                    steps: [
                        "蹲下来，帮助孩子说出情绪：'积木倒了，你感到很生气，对吗？'",
                        "将大任务拆小：'我们先只搭底座这一层，好吗？'",
                        "示范失败后的反应：故意做错并以此为乐，'哎呀倒了！没关系，我们看看它是怎么倒的。'"
                    ],
                    quote: "看来这个问题有点难，没关系，我们深呼吸，然后只解决这一个小角。"
                },
                "preschool-dependent": {
                    title: "傻瓜妈妈/爸爸策略",
                    tag: "反向示弱",
                    desc: "通过家长故意示弱，激发孩子的胜负欲和教导欲。",
                    steps: [
                        "装作不知道怎么做：'哎呀，这个怎么装不进去呢？宝宝你能帮帮我吗？'",
                        "肯定过程而非结果：'哇，你尝试了转动它，这真是个好办法。'"
                    ],
                    quote: "我完全被难住了，如果是你，你会先试哪一个？"
                },
                "school-logic": {
                    title: "思维可视化地图",
                    tag: "认知工具",
                    desc: "针对想到哪做到哪的孩子，强制引入'计划'环节。",
                    steps: [
                        "在动手前，要求先在纸上画出步骤图。",
                        "引入'红绿灯'机制：红灯停（思考），黄灯看（检查条件），绿灯行（执行）。",
                        "事后复盘：'哪个步骤和你预想的不一样？'"
                    ],
                    quote: "停一下，在行动之前，先告诉我你的第一步打算做什么？"
                },
                "default": {
                    title: "C.P.R. 引导模型",
                    tag: "通用策略",
                    desc: "Connection (连接情绪) -> Plan (制定计划) -> Review (回顾反思)",
                    steps: [
                        "先共情孩子的困难。",
                        "引导孩子提出至少3个解决方案。",
                        "无论成败，最后都要问：'下次我们可以哪里做得不一样？'"
                    ],
                    quote: "这确实是个难题。我们一起来头脑风暴一下，看看有多少种解法？"
                }
            }
        };

        // Chart Initialization
        let ageChartInstance = null;
        let heroChartInstance = null;

        document.addEventListener('DOMContentLoaded', () => {
            initHeroChart();
            initAgeChart(); // Default to preschool
            initImpactCharts();
            
            // Default load essence
            // updateEssence('cognitive'); // Optional: open first by default
        });

        // Navigation
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // Logic for Section 1: Essence
        function updateEssence(type) {
            const data = appData.essence[type];
            const detailBox = document.getElementById('essence-detail');
            const title = document.getElementById('essence-title');
            const desc = document.getElementById('essence-desc');
            const insight = document.getElementById('essence-insight');

            // Fade out effect
            detailBox.style.opacity = '0.5';

            setTimeout(() => {
                title.textContent = data.title;
                title.className = `text-2xl font-bold text-${data.color}-600 mb-4`;
                desc.textContent = data.desc;
                insight.textContent = data.insight;
                detailBox.parentElement.querySelector('.border-l-4').className = `mt-6 p-4 bg-${data.color}-50 rounded-md border-l-4 border-${data.color}-500`;
                
                // Fade in
                detailBox.style.opacity = '1';
            }, 200);
        }

        // Logic for Section 2: Age Charts
        function initAgeChart() {
            const ctx = document.getElementById('ageTrendChart').getContext('2d');
            ageChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['想象力', '好奇心', '逻辑推理', '计划执行'],
                    datasets: [{
                        label: '3-6岁 能力分布',
                        data: appData.ageContent.preschool.chartData,
                        fill: true,
                        backgroundColor: 'rgba(49, 151, 149, 0.2)',
                        borderColor: 'rgb(49, 151, 149)',
                        pointBackgroundColor: 'rgb(49, 151, 149)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(49, 151, 149)'
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    responsive: true,
                    scales: {
                        r: {
                            angleLines: { display: false },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
        }

        function updateAgeChart(ageGroup) {
            // Update Text
            const content = appData.ageContent[ageGroup];
            const container = document.getElementById('age-content');
            
            let html = `<h3 class="text-2xl font-bold text-gray-800 transition-all">${content.title}</h3>
                        <ul class="space-y-4 mt-4 list-none pl-0">`;
            
            content.points.forEach(point => {
                html += `<li class="flex items-start"><i class="fa-solid fa-check-circle text-teal-500 mt-1 mr-3"></i><span>${point}</span></li>`;
            });
            
            html += `</ul>
                     <div class="mt-6 bg-orange-50 p-4 rounded text-orange-800 text-sm">
                        <i class="fa-solid fa-lightbulb mr-2"></i> 提示：${content.tip}
                     </div>`;
            
            container.innerHTML = html;

            // Update Buttons
            ['preschool', 'school', 'teen'].forEach(group => {
                const btn = document.getElementById(`btn-${group}`);
                if (group === ageGroup) {
                    btn.classList.remove('text-gray-500', 'hover:text-gray-900');
                    btn.classList.add('bg-white', 'shadow', 'text-gray-900');
                } else {
                    btn.classList.add('text-gray-500', 'hover:text-gray-900');
                    btn.classList.remove('bg-white', 'shadow', 'text-gray-900');
                }
            });

            // Update Chart
            ageChartInstance.data.datasets[0].data = content.chartData;
            ageChartInstance.data.datasets[0].label = content.title.split('：')[0] + ' 能力分布';
            ageChartInstance.update();
        }

        // Logic for Section 3: Impact Charts
        function initImpactCharts() {
            // Chart 1: Parenting
            const ctxP = document.getElementById('parentingChart').getContext('2d');
            new Chart(ctxP, {
                type: 'bar',
                data: {
                    labels: ['直接给答案', '直接指令', '引导式提问', '脚手架支持'],
                    datasets: [{
                        label: '儿童主动尝试解决问题的频率 (%)',
                        data: [15, 30, 65, 85],
                        backgroundColor: [
                            'rgba(203, 213, 224, 0.6)',
                            'rgba(203, 213, 224, 0.6)',
                            'rgba(49, 151, 149, 0.6)',
                            'rgba(49, 151, 149, 0.9)'
                        ],
                        borderColor: [
                            'rgb(203, 213, 224)',
                            'rgb(203, 213, 224)',
                            'rgb(49, 151, 149)',
                            'rgb(49, 151, 149)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    }
                }
            });

            // Chart 2: School
            const ctxS = document.getElementById('schoolChart').getContext('2d');
            new Chart(ctxS, {
                type: 'line',
                data: {
                    labels: ['第1个月', '第2个月', '第3个月', '第4个月', '第5个月', '第6个月'],
                    datasets: [{
                        label: '传统教学班',
                        data: [40, 42, 45, 46, 48, 50],
                        borderColor: 'rgb(203, 213, 224)',
                        tension: 0.4
                    }, {
                        label: 'PBL项目式学习班',
                        data: [40, 48, 55, 68, 75, 82],
                        borderColor: 'rgb(49, 151, 149)',
                        backgroundColor: 'rgba(49, 151, 149, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    responsive: true,
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw + '分 (解决问题综合评分)';
                                }
                            }
                        }
                    },
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    }
                }
            });
        }

        // Logic for Hero Radar
        function initHeroChart() {
            const ctx = document.getElementById('heroRadarChart').getContext('2d');
            heroChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['认知技能', '情绪韧性', '行为尝试'],
                    datasets: [{
                        data: [33, 33, 34],
                        backgroundColor: [
                            'rgba(66, 153, 225, 0.7)',
                            'rgba(236, 201, 75, 0.7)',
                            'rgba(72, 187, 120, 0.7)'
                        ],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    responsive: true,
                    plugins: {
                        legend: { position: 'bottom' }
                    },
                    cutout: '70%'
                }
            });
        }

        // Logic for Action Lab
        function generateStrategy() {
            const age = document.getElementById('input-age').value;
            const issue = document.getElementById('input-issue').value;
            const key = `${age}-${issue}`;
            
            // Try to find specific match, fall back to default or semi-match
            let strategy = appData.strategies[key];
            if (!strategy) {
                // Fallback logic simply to provide varied content based on partial matches in a real app
                // For this demo, we check if specific key exists, else show a default logic
                if (issue === 'giveup') strategy = appData.strategies["preschool-giveup"];
                else if (issue === 'dependent') strategy = appData.strategies["preschool-dependent"];
                else if (issue === 'logic') strategy = appData.strategies["school-logic"];
                else strategy = appData.strategies["default"];
            }

            // Populate Result
            document.getElementById('result-title').textContent = strategy.title;
            document.getElementById('result-tag').textContent = strategy.tag;
            document.getElementById('result-desc').textContent = strategy.desc;
            document.getElementById('result-quote').textContent = strategy.quote;

            const stepsContainer = document.getElementById('result-steps');
            stepsContainer.innerHTML = '';
            strategy.steps.forEach(step => {
                const li = document.createElement('li');
                li.textContent = step;
                stepsContainer.appendChild(li);
            });

            // Show Result
            const resultDiv = document.getElementById('strategy-result');
            resultDiv.classList.remove('hidden');
            resultDiv.classList.add('block');
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

    </script>
</body>
</html>